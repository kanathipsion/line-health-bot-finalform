<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Health Form</title>
  <script>
    function submitForm() {
      const userId = new URLSearchParams(window.location.search).get('userId');
      const healthMessage = 'Your health data has been submitted successfully.';
      const packageId = '1'; // เปลี่ยนตามสติกเกอร์ที่ต้องการ
      const stickerId = '13'; // เปลี่ยนตามสติกเกอร์ที่ต้องการ

      const healthData = {
        bloodPressure: document.getElementById('bloodPressure').value,
        bloodSugar: document.getElementById('bloodSugar').value,
        height: document.getElementById('height').value,
        weight: document.getElementById('weight').value,
      };

      fetch('/send-message', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          userId: userId,
          message: healthMessage,
          packageId: packageId,
          stickerId: stickerId,
          healthData: healthData,
        }),
      })
      .then(response => response.text())
      .then(result => {
        alert(result);
      })
      .catch(error => {
        console.error('Error:', error);
        alert('เกิดข้อผิดพลาดในการส่งข้อมูล');
      });
    }
  </script>
</head>
<body>
  <h1>Health Form</h1>
  <label for="bloodPressure">Blood Pressure:</label>
  <input type="text" id="bloodPressure"><br>
  <label for="bloodSugar">Blood Sugar:</label>
  <input type="text" id="bloodSugar"><br>
  <label for="height">Height (cm):</label>
  <input type="text" id="height"><br>
  <label for="weight">Weight (kg):</label>
  <input type="text" id="weight"><br>
  <button onclick="submitForm()">Submit</button>
</body>
</html>
